<div id="article_content" class="article_content clearfix csdn-tracking-statistics" data-pid="blog" data-mod="popu_307" data-dsm="post">
								<div class="article-copyright">
                  					
					版权声明：本文为博主原创文章，未经博主允许不得转载。					https://blog.csdn.net/u012267215/article/details/86574418				</div>
								            <link rel="stylesheet" href="https://csdnimg.cn/release/phoenix/template/css/ck_htmledit_views-db05db230f.css">
						<div class="htmledit_views" id="content_views">
                <figure class="image has"><img alt="" height="527" src="https://img-blog.csdnimg.cn/20190121145432279.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3UwMTIyNjcyMTU=,size_16,color_FFFFFF,t_70" width="900"><figcaption>libcore\dalvik\src\main\java\dalvik\system&nbsp; &nbsp; ClassLoader<br>
​</figcaption></figure><p>&nbsp;</p>

<p>1、</p>

<p>dx&nbsp; &nbsp;sdk/build-tools,class/jar生成dex文件</p>

<p>命令： dx&nbsp; --dex --output 文件名.dex&nbsp; 文件名.jar</p>

<p>2、</p>

<p style="margin-left:0in;"><span style="color:#66c7ff;"><strong>zipalign</strong></span></p>

<p style="margin-left:0in;">&nbsp; <span style="color:#66c7ff;"><strong>sdk\build-tools ，</strong></span><span style="color:#66c7ff;"><strong>apk</strong></span><span style="color:#66c7ff;"><strong>整理对齐工具。</strong></span></p>

<p style="margin-left:0in;">&nbsp; <span style="color:#66c7ff;"><strong>未压缩的数据开头均相对于文件开头部分执行特定的字节对齐，减少应用运行内存。</strong></span></p>

<p style="margin-left:0in;">&nbsp; <span style="color:#007abf;"><strong>https://developer.android.google.cn/studio/command-line/zipalign.html</strong></span></p>

<p style="margin-left:0in;"><span style="color:#66c7ff;"><strong>命令：</strong></span><span style="color:#66c7ff;"><strong>zipalign </strong></span><span style="color:#66c7ff;"><strong>[</strong></span><span style="color:#66c7ff;"><strong>-v</strong></span><span style="color:#66c7ff;"><strong>] [-f]</strong></span><span style="color:#66c7ff;"><strong>&nbsp; 4 </strong></span><span style="color:#66c7ff;"><strong>in</strong></span><span style="color:#66c7ff;"><strong>.apk </strong></span><span style="color:#66c7ff;"><strong>out</strong></span><span style="color:#66c7ff;"><strong>.apk</strong></span></p>

<p style="margin-left:0in;"><span style="color:#66c7ff;"><strong>3、apksigner</strong></span></p>

<p style="margin-left:0in;">&nbsp; <span style="color:#66c7ff;"><strong>sdk\build-tools\24.0.3 以上，</strong></span><span style="color:#66c7ff;"><strong>apk</strong></span><span style="color:#66c7ff;"><strong>签名工具</strong></span></p>

<p style="margin-left:0in;">&nbsp; <span style="color:#007abf;"><strong>https://developer.android.google.cn/studio/command</strong></span><span style="color:#007abf;"><strong>-</strong></span><span style="color:#007abf;"><strong>line/apksigner.html#options-sign-general</strong></span></p>

<p style="margin-left:0in;">&nbsp; <span style="color:#66c7ff;"><strong>签名</strong></span><span style="color:#66c7ff;"><strong>:</strong></span></p>

<p style="margin-left:0in;">&nbsp; <span style="color:#66c7ff;"><strong>apksigner sign&nbsp; --ks </strong></span><span style="color:#66c7ff;"><strong>jks</strong></span><span style="color:#66c7ff;"><strong>文件地址</strong></span><span style="color:#66c7ff;"><strong> --ks-key-alias 别名 --ks-pass pass:</strong></span><span style="color:#66c7ff;"><strong>jsk</strong></span><span style="color:#66c7ff;"><strong>密码</strong></span><span style="color:#66c7ff;"><strong> --key-pass pass:别名密码 --out&nbsp; </strong></span><span style="color:#66c7ff;"><strong>out</strong></span><span style="color:#66c7ff;"><strong>.apk</strong></span> <span style="color:#66c7ff;"><strong>in</strong></span><span style="color:#66c7ff;"><strong>.apk</strong></span></p>

<p style="margin-left:0in;">&nbsp;</p>

<p style="margin-left:0in;">4、openssl</p>

<p style="margin-left:0in;"><span style="color:#66c7ff;"><strong>密码库，囊括主要的密码算法、常用的密钥和证书封装管理功能及SSL协议。</strong></span></p>

<p style="margin-left:0in;">&nbsp;</p>

<p style="margin-left:0in;"><span style="color:#66c7ff;"><strong>步骤</strong></span></p>

<p style="margin-left:0in;"><span style="color:#66c7ff;"><strong>&nbsp; 1</strong></span><span style="color:#66c7ff;"><strong>、下载</strong></span></p>

<p style="margin-left:0in;">&nbsp; <span style="color:#66c7ff;"><strong>wget</strong></span><span style="color:#66c7ff;"><strong> https://www.openssl.org/source/openssl-1.1.0g.tar.gz</strong></span></p>

<p style="margin-left:0in;"><span style="color:#66c7ff;"><strong>&nbsp; 2</strong></span><span style="color:#66c7ff;"><strong>、解压</strong></span></p>

<p style="margin-left:0in;"><span style="color:#66c7ff;"><strong>&nbsp; tar </strong></span><span style="color:#66c7ff;"><strong>xvf</strong></span>&nbsp; <span style="color:#66c7ff;"><strong>openssl-1.1.0g.tar.gz</strong></span></p>

<p style="margin-left:0in;"><span style="color:#66c7ff;"><strong>&nbsp; 3</strong></span><span style="color:#66c7ff;"><strong>、编译脚本</strong></span></p>

<p style="margin-left:0in;">&nbsp; <span style="color:#66c7ff;"><strong>复制</strong></span><span style="color:#66c7ff;"><strong>https://wiki.openssl.org/images/7/70/Setenv-android.sh</strong></span><span style="color:#66c7ff;"><strong>中的内容，修改以 </strong></span><span style="color:#66c7ff;"><strong>'</strong></span><span style="color:#fa1f00;"><strong>_</strong></span><span style="color:#66c7ff;"><strong>' </strong></span><span style="color:#66c7ff;"><strong>开头的变量</strong></span><span style="color:#66c7ff;"><strong>( </strong></span><span style="color:#fa1f00;"><strong>_ANDROID_NDK</strong></span> <span style="color:#66c7ff;"><strong>不用管，《</strong></span><span style="color:#fa1f00;"><strong>export ANDROID_NDK_ROOT=NDK</strong></span><span style="color:#fa1f00;"><strong>目录</strong></span><span style="color:#66c7ff;"><strong>》</strong></span> <span style="color:#66c7ff;"><strong>即可</strong></span><span style="color:#66c7ff;"><strong>)</strong></span></p>

<p style="margin-left:0in;">&nbsp; <span style="color:#66c7ff;"><strong>在末尾加上</strong></span></p>

<p style="margin-left:0in;"><span style="color:#66c7ff;"><strong>&nbsp; ./</strong></span><span style="color:#66c7ff;"><strong>config</strong></span><span style="color:#66c7ff;"><strong> shared no-ssl2 no-ssl3 no-comp no-</strong></span><span style="color:#66c7ff;"><strong>hw</strong></span><span style="color:#66c7ff;"><strong> no-engine --</strong></span><span style="color:#66c7ff;"><strong>openssldir</strong></span><span style="color:#66c7ff;"><strong>=`</strong></span><span style="color:#66c7ff;"><strong>pwd</strong></span><span style="color:#66c7ff;"><strong>`/android/x86/</strong></span><span style="color:#66c7ff;"><strong>openssl</strong></span><span style="color:#66c7ff;"><strong> --prefix=`</strong></span><span style="color:#66c7ff;"><strong>pwd</strong></span><span style="color:#66c7ff;"><strong>`/android/x86</strong></span></p>

<p style="margin-left:0in;"><span style="color:#66c7ff;"><strong>&nbsp; make depend</strong></span></p>

<p style="margin-left:0in;"><span style="color:#66c7ff;"><strong>&nbsp; make all</strong></span></p>

<p style="margin-left:0in;">&nbsp; <span style="color:#66c7ff;"><strong>sudo</strong></span><span style="color:#66c7ff;"><strong> -E make install CC=$ANDROID_TOOLCHAIN/arm-</strong></span><span style="color:#66c7ff;"><strong>linux</strong></span><span style="color:#66c7ff;"><strong>-</strong></span><span style="color:#66c7ff;"><strong>androideabi-gcc</strong></span><span style="color:#66c7ff;"><strong> RANLIB=$ANDROID_TOOLCHAIN/arm-</strong></span><span style="color:#66c7ff;"><strong>linux</strong></span><span style="color:#66c7ff;"><strong>-</strong></span><span style="color:#66c7ff;"><strong>androideabi-ranlib</strong></span></p>

<p style="margin-left:0in;"><span style="color:#66c7ff;"><strong>&nbsp; (</strong></span><span style="color:#66c7ff;"><strong>arm-</strong></span><span style="color:#66c7ff;"><strong>linux</strong></span><span style="color:#66c7ff;"><strong>-</strong></span><span style="color:#66c7ff;"><strong>androideabi</strong></span><span style="color:#66c7ff;"><strong>- </strong></span><span style="color:#66c7ff;"><strong>如果是</strong></span><span style="color:#66c7ff;"><strong>x86</strong></span><span style="color:#66c7ff;"><strong>需要为i686-linux-android-</strong></span><span style="color:#66c7ff;"><strong>)</strong></span></p>

<p style="margin-left:0in;">&nbsp;</p>

<p style="margin-left:0in;">ActivityManagerService</p>

<p style="margin-left:0in;"><span style="color:#66c7ff;"><strong>frameworks/base/ </strong></span><span style="color:#66c7ff;"><strong>core/java/com/android/server/am/</strong></span><span style="color:#66c7ff;"><strong>ActivityManagerService.java</strong></span></p>

<p style="margin-left:0in;"><span style="color:#66c7ff;"><strong>Zygote</strong></span></p>

<p style="margin-left:0in;">&nbsp; <span style="color:#66c7ff;"><strong>进程孵化器</strong></span></p>

<p style="margin-left:0in;"><span style="color:#66c7ff;"><strong>SystemServer</strong></span></p>

<p style="margin-left:0in;">&nbsp; <span style="color:#66c7ff;"><strong>由</strong></span><span style="color:#66c7ff;"><strong>Zygote</strong></span><span style="color:#66c7ff;"><strong>孵化</strong></span><span style="color:#66c7ff;"><strong>,</strong></span><span style="color:#66c7ff;"><strong>核心</strong></span><span style="color:#66c7ff;"><strong>Service</strong></span><span style="color:#66c7ff;"><strong>所在</strong></span><span style="color:#66c7ff;"><strong>进程</strong></span><span style="color:#66c7ff;"><strong>。</strong></span></p>

<p style="margin-left:0in;"><span style="color:#66c7ff;">AMS</span></p>

<p style="margin-left:0in;">&nbsp; <span style="color:#66c7ff;">在</span><span style="color:#66c7ff;"><strong>SystemServer</strong></span><span style="color:#66c7ff;"><strong>中启动。</strong></span><span style="color:#66c7ff;">最</span><span style="color:#66c7ff;">核心的服务，主要负责系统中四大组件的启动、切换、调度及应用程序的管理和调度等工作</span><span style="color:#66c7ff;">。</span></p>

<p style="margin-left:0in;"><img alt="" class="has" height="539" src="https://img-blog.csdnimg.cn/20190121150349121.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3UwMTIyNjcyMTU=,size_16,color_FFFFFF,t_70" width="890"></p>

<p style="margin-left:0in;"><span style="color:#66c7ff;"><strong>Android</strong></span> <span style="color:#66c7ff;"><strong>A</strong></span><span style="color:#66c7ff;"><strong>pplication</strong></span><span style="color:#66c7ff;"><strong>启动流程</strong></span></p>

<p style="margin-left:0in;"><img alt="" class="has" height="538" src="https://img-blog.csdnimg.cn/20190121150543799.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3UwMTIyNjcyMTU=,size_16,color_FFFFFF,t_70" width="890">项目地址：<a href="https://github.com/IanIanIanIan/ProxyGuard" rel="nofollow" target="_blank">https://github.com/IanIanIanIan/ProxyGuard</a></p>            </div>
                </div>
